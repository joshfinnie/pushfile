#!/usr/bin/env node

var opts = require('nomnom');
var pushfile = require(__dirname + '/../lib/pushfile');

var version = require(__dirname + '/../package').version;

opts
  .option('file', {
    position: 0,
    help: 'Path to file you wish to push to S3.',
  })
  .option('unique', {
    abbr: 'u',
    metavar: '[file]',
    flag: true,
    help: 'Gives a unique, timestamped hash for uploaded filename.'
  })
  .option('configure', {
    abbr: 'c',
    flag: true,
    help: 'Create a configuration file.'
  })
  .option('version', {
    abbr: 'v',
    flag: true,
    help: 'Prints version.',
    callback: function() {
      return "Version: " + version  
    }
  });

var argv = opts.parse();

var argvLength = argv._.length;
var unique = argv.u || argv.unique;

if (argv.configure) {
  pushfile.createConfig();
}
if (unique && argvLength > 0) {
  pushfile.pushfile(argv._.join(' '), unique=true);
} 
if (!unique && argvLength > 0) {
  pushfile.pushfile(argv._.join(' '), unique=false);
}
if (argvLength <= 0) {
  console.log("no filename...")
}
